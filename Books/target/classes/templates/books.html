<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Books List</title>
</head>
<body>
<h1>Books List</h1>
<form th:action="@{/books}" method="get">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" th:value="${title}">

    <label for="author">Author:</label>
    <input type="text" id="author" name="author" th:value="${author}">

    <label for="year">Year:</label>
    <input type="number" id="year" name="year" th:value="${year}">

    <label for="rating">Rating:</label>
    <input type="number" id="rating" name="rating" min="0" max="5" th:value="${rating}">

    <button type="submit">Filter</button>
</form>

<hr>
<table border="3" style="border-color: slategray; background-color:darkgray ;">
    <thead>
    <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Year</th>
        <th>Rating</th>
        <th>Update Rating</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${books}">
        <td th:text="${book.title}"></td>
        <td th:text="${book.author}"></td>
        <td th:text="${book.year}"></td>
        <td th:text="${book.rating}"></td>
        <td>
            <form th:action="@{/books/{isbn}/rating(isbn=${book.isbn})}" method="post">
                <input type="number" name="rating" min="0" max="5" required>
                <button type="submit">Update Rating</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>
